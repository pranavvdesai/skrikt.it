{let e=()=>{let e=$("#new-post");e.submit((function(o){o.preventDefault(),$.ajax({type:"POST",url:"/users/postcreate",data:e.serialize(),success:function(e){console.log(e);let o=n(e.data.post);$("#post-container").prepend(o);let s=$(" .delete-post",o);t(s),new PostComments(e.data.post._id)},error:function(e){console.log(e.responseText)}})}))},n=e=>$(`<div id="post-${e._id}">\n        \n          ${e.content}\n          <small>${e.user.name}</small>\n           \n              <small><a class="delete-post" href="/users/delete/${e._id}">Delete</a></small>       \n            \n          \n          <form action="/users/commentcreate" id="new-comment" method="POST">\n              <textarea name="content" cols="10" rows="1" required></textarea>\n              <input type="hidden" name="post" value="${e._id}" />\n              <input type="submit" value="comment" />\n          </form>\n          \n          \n          <section id="comment-container">\n          </section>\n          \n          \n      </div>\n      \n         `),t=e=>{$(e).click((function(n){n.preventDefault(),$.ajax({type:"GET",url:$(e).prop("href"),success:function(e){$(`#post-${e.data.post_id}`).remove(),console.log(e)},error:function(e){console.log(e.responseText)}})}))},o=()=>{$("#post-container").children().children().children("a.delete-post").each((function(){let e=$(this);t(e);let n=e.prop("id").split("-")[1];new PostComments(n)}))};e(),o()}